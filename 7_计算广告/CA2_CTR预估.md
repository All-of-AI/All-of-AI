## 计算广告2 CTR预估

### 2.1 CTR预估简介

**CTR预估**是竞价广告核心的逻辑之一，指在某个上下文$c$中，预测用户$u$是否会对广告$a$产生点击事件。

**引例**：阿迪达斯和耐克作为广告主来竞价，阿迪达斯出2块钱一个点击，耐克出1块钱一个点击，假如广告供给方微信广告平台有100次曝光，它应该将广告的投放权给谁？

如果阿迪达斯的点击率为1%，耐克的点击率为5%，那么将100次曝光全部给阿迪达斯的话，总共平均能产生1次点击。由于每个点击价值为2块钱，因而微信能赚2块；如果将100次曝光全部给耐克的话，总共平均能产生产生5个点击，每词点击价值1块，微信能赚5块。综上所述，**广告的点击率能够直接对广告供给方的盈利产生影响**。

从以上引例中，我们可以看出几点：

(1) **广告平台关心自己的流量价值**，即自己的流量曝光卖的贵还是便宜，一般用eCPM(earning cost per mille)这个指标来衡量，即**每1000次曝光带来收入**。

(2) **广告主一般按点击进行扣费**，即广告主通常关心结果，出价原则就看一个点击需要花多少钱。

(3) **广告平台需要把点击出价转化成eCPM进行扣费和排序**。

(4) **CTR架起了从点击到曝光的一座桥梁，为排序提供基础**。

总结起来就是一个简单的公式：$ePCM=1000 \times CTR \times 点击出价$。在上面这个案例中，阿迪达斯的千次展示收入为$eCPM=1000 \times 0.01 \times 2=20$，而耐克为$eCPM=1000 \times 0.05 \times 1=50$，显然耐克的eCPM大于阿迪达斯，因此耐克会在这次竞价中胜出。

从这个案例中我们可以看到，**CTR是为广告排序用的**，而排序本身就是竞价广告的核心，因此CTR预估也是竞价广告的核心技术之一。**不仅广告系统需要CTR预估来排序，推荐系统也需要CTR预估来排序**，因此CTR预估应用其实比我们想象的要更加广泛：YouTube、亚马逊、今日头条等等涉及到个性化推荐的系统都会应用到CTR预估，即他们要把用户最可能点击的内容向用户推荐。

在不同的场景下，CTR预估所采用的特征也不一样。例如，在淘宝等电商网站中，用户的收藏、购买等行为会对CTR预估结果产生影响；在YouTube等视频门户中，用户在视频中的停留时长也应考虑在内。

针对CTR预估问题，算法提出的背景如下：

(1) 点击率预估模型中的**训练样本量大，可达上亿级别**；

(2) 常采用速度较快的**逻辑回归(LR)**模型。但LR是线性模型，**学习能力有限**；

(3) **特征工程非常重要**，主要通过人工方式找到有区分度的特征、特征组合，对人的要求高，时间成本高。因此**如何自动发现有效的特征及特征组合，弥补人工经验不足，缩短实验周期**是CTR预估中的重要问题。

CTR预估中的**经典模型**：GBDT+LR，Wide & Deep，FM，FFM，DeepFM，NFM，Deep & Cross，xDeepFM，DIN，DIEN，DSIN等。

### 参考资料

[1] https://www.meihua.info/a/72378